<!-- QUANT — Strategy Backtesting Lab -->
<div id="tab-quant" class="tab-content">

  <!-- Agent Hero Card -->
  <div class="agent-hero" style="--hero-accent:var(--agent-quant);">
    <div class="agent-hero-top">
      <div class="agent-hero-icon" style="background:rgba(139,92,246,0.15);color:var(--agent-quant);">Q</div>
      <div>
        <div class="agent-hero-title">Quant — Strategy Backtesting Lab</div>
        <div class="agent-hero-role">Automated Strategy Optimization &amp; Validation</div>
      </div>
    </div>
    <div class="agent-hero-desc">
      Quant is the system's research arm — it never executes trades, only recommends. It runs automated
      strategy optimization with <strong>walk-forward validation</strong>, Monte Carlo simulation (10,000 paths),
      and CUSUM edge decay detection to determine when a strategy is losing its edge. Each backtest cycle
      produces actionable parameter recommendations with confidence intervals. A per-trade learning module
      tracks which market conditions produce the best results and feeds insights back to active traders.
    </div>
    <div class="agent-hero-caps">
      <span class="agent-cap agent-cap-highlight">Research Only</span>
      <span class="agent-cap">Walk-Forward Validation</span>
      <span class="agent-cap">Monte Carlo (10K Paths)</span>
      <span class="agent-cap">CUSUM Edge Detection</span>
      <span class="agent-cap">Per-Trade Learning</span>
      <span class="agent-cap">Parameter Optimization</span>
    </div>
  </div>

  <!-- Header -->
  <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px;">
    <h2 style="margin:0;font-size:1.1rem;font-weight:700;">
      Quant &mdash; Strategy Backtesting Lab
    </h2>
    <span class="badge badge-info">
      <span class="status-dot online" id="qt-status-dot"></span>
      <span id="quant-mode">Historical Replay</span>
    </span>
    <span class="text-muted" style="font-family:var(--font-mono);font-size:0.68rem;">
      Cycle: <span id="quant-cycle">--</span>
    </span>
    <span class="text-muted" style="font-family:var(--font-mono);font-size:0.68rem;" id="quant-last-update">--</span>
    <button class="btn" onclick="quantTriggerRun()" id="quant-run-btn" style="font-size:0.72rem;font-weight:700;border-color:var(--agent-quant);color:var(--agent-quant);">Trigger Backtest</button>
    <button class="btn" onclick="quantHealthCheck()" style="font-size:0.72rem;margin-left:auto;">Health Check</button>
    <span class="text-muted" style="font-size:0.68rem;">
      Updated: <span id="quant-updated">--</span>
    </span>
  </div>

  <div class="health-inline" id="quant-health-result"></div>

  <!-- Progress Bar -->
  <div id="quant-progress-bar" style="display:none;margin-bottom:12px;">
    <div class="glass-card" style="border-left:3px solid var(--agent-quant);padding:12px 16px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span id="quant-progress-label" style="font-weight:600;color:var(--agent-quant);font-size:0.82rem;"></span>
        <span id="quant-progress-pct" style="font-size:0.72rem;color:var(--text-muted);">0%</span>
      </div>
      <div style="height:6px;background:rgba(255,255,255,0.06);border-radius:3px;overflow:hidden;">
        <div id="quant-progress-fill" style="height:100%;width:0%;background:var(--agent-quant);border-radius:3px;transition:width 0.5s ease;"></div>
      </div>
      <div id="quant-progress-detail" style="font-size:0.7rem;color:var(--text-muted);margin-top:6px;"></div>
    </div>
  </div>

  <!-- Strategy Verdict Banner -->
  <div id="quant-verdict-banner" class="glass-card" style="display:none;margin-bottom:14px;border-left:3px solid var(--agent-quant);">
    <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
      <div style="text-align:center;min-width:80px;">
        <div style="font-size:0.62rem;color:var(--text-muted);text-transform:uppercase;">Current WR</div>
        <div id="quant-verdict-current" style="font-size:1.4rem;font-weight:800;font-family:var(--font-mono);">--</div>
      </div>
      <span style="font-size:1.6rem;color:var(--text-muted);">&rarr;</span>
      <div style="text-align:center;min-width:80px;">
        <div style="font-size:0.62rem;color:var(--text-muted);text-transform:uppercase;">Best WR</div>
        <div id="quant-verdict-best" style="font-size:1.4rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
      </div>
      <span id="quant-verdict-delta" style="font-family:var(--font-mono);font-weight:700;font-size:0.88rem;">--</span>
      <span id="quant-verdict-text" style="font-size:0.76rem;color:var(--text-secondary);flex:1;min-width:200px;"></span>
    </div>
  </div>

  <!-- Live Param Override Status -->
  <div id="quant-live-params-card" class="glass-card" style="display:none;margin-bottom:14px;border-left:3px solid var(--agent-quant);">
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
      <span id="quant-lp-badge" style="font-family:var(--font-mono);font-size:0.68rem;font-weight:700;padding:3px 10px;border-radius:var(--radius-pill);background:rgba(0,191,255,0.12);color:var(--agent-quant);">AUTO-PILOT</span>
      <div style="flex:1;min-width:200px;">
        <div id="quant-lp-summary" style="font-size:0.76rem;color:var(--text-secondary);"></div>
        <div id="quant-lp-detail" style="font-size:0.68rem;color:var(--text-muted);margin-top:2px;"></div>
      </div>
      <div id="quant-lp-params" style="display:flex;gap:8px;flex-wrap:wrap;"></div>
    </div>
  </div>

  <!-- Hero Metrics: Intelligence Overview -->
  <div style="display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;">
    <!-- Radar Card -->
    <div class="glass-card" style="flex:1;min-width:200px;max-width:280px;">
      <div id="qt-radar-container" style="margin-bottom:8px;"></div>
      <div style="display:flex;align-items:baseline;gap:6px;justify-content:center;">
        <span id="qt-score-value" style="font-size:1.6rem;font-weight:800;font-family:var(--font-mono);color:var(--agent-quant);">--</span>
        <span id="qt-score-grade" style="font-size:0.88rem;font-weight:600;color:var(--text-secondary);">--</span>
      </div>
      <div style="text-align:center;font-family:var(--font-mono);font-size:0.64rem;color:var(--text-muted);margin-top:4px;">
        Optimizer: <span id="quant-optimizer">--</span>
        &nbsp; Trades: <span id="quant-trade-count">--</span>
        <span id="quant-signal-summary"></span>
      </div>
    </div>
    <!-- Stat Cards Column -->
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;flex:2;">
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-baseline-wr" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);color:var(--agent-quant);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">Current WR</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-wf-oos" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">OOS WR</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-kelly" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);color:var(--warning);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">Kelly Size</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-decay-status" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">Strategy Health</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-trades" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">Trades</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:12px;">
        <div id="quant-diversity" style="font-size:1.2rem;font-weight:800;font-family:var(--font-mono);">--</div>
        <div style="font-size:0.64rem;color:var(--text-muted);text-transform:uppercase;">Diversity</div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:14px;">
    <button class="btn" onclick="quantApplyParams()" style="font-size:0.68rem;">
      <span style="color:var(--success);">&#x2713;</span> Apply Best Params
    </button>
    <button class="btn" onclick="quantRollbackParams()" style="font-size:0.68rem;">
      <span style="color:var(--error);">&#x21B6;</span> Rollback
    </button>
    <button class="btn" onclick="loadQuantPhase2()" style="font-size:0.68rem;">
      <span style="color:var(--warning);">&#x2696;</span> Regime Check
    </button>
    <button class="btn" onclick="loadQuantPhase2()" style="font-size:0.68rem;">
      <span style="color:var(--agent-quant);">&#x2194;</span> Correlation Scan
    </button>
    <button class="btn" onclick="loadQuantPNLImpact()" style="font-size:0.68rem;">
      <span style="color:#8B5CF6;">&#x24;</span> PNL Impact
    </button>
    <button class="btn" onclick="quantExportReport()" style="font-size:0.68rem;">
      <span style="color:var(--text-muted);">&#x2913;</span> Export Report
    </button>
    <span id="qt-action-status" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);margin-left:auto;"></span>
  </div>

  <!-- Smart Actions -->
  <div id="quant-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:16px;"></div>

  <!-- Sub-tab Navigation -->
  <div style="display:flex;gap:6px;margin-bottom:16px;flex-wrap:wrap;">
    <button class="quant-subtab active" data-sub="results" onclick="quantSwitchSub('results')">Results</button>
    <button class="quant-subtab" data-sub="validation" onclick="quantSwitchSub('validation')">Validation</button>
    <button class="quant-subtab" data-sub="analytics" onclick="quantSwitchSub('analytics')">Analytics</button>
    <button class="quant-subtab" data-sub="odin" onclick="quantSwitchSub('odin')">Odin Backtest</button>
  </div>

  <!-- ═══ Panel: Results ═══ -->
  <div class="quant-panel" id="quant-panel-results">

    <!-- Top Backtest Results Table -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--agent-quant);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-quant);">Top Backtest Results</span>
        <span id="quant-best-wr" style="font-family:var(--font-mono);font-size:0.72rem;color:var(--success);font-weight:600;"></span>
      </div>
      <div style="overflow-x:auto;">
        <table style="width:100%;border-collapse:collapse;font-size:0.72rem;">
          <thead>
            <tr style="background:var(--surface-elevated);text-align:left;">
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">#</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Label</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Score</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Win Rate</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">PF</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Signals</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">W/L</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Avg Edge</th>
            </tr>
          </thead>
          <tbody id="quant-results-tbody"></tbody>
        </table>
      </div>
    </div>

    <!-- What to Change -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid #ff6600;">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:#ff6600;">What to Change</span>
      <div style="overflow-x:auto;margin-top:8px;">
        <table style="width:100%;border-collapse:collapse;font-size:0.72rem;">
          <thead>
            <tr style="background:var(--surface-elevated);text-align:left;">
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Parameter</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Now</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Optimal</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Status</th>
            </tr>
          </thead>
          <tbody id="quant-params-tbody"></tbody>
        </table>
      </div>
      <div id="quant-recommendations" style="padding-top:8px;font-size:0.72rem;"></div>
    </div>

    <!-- PNL Impact -->
    <div id="quant-pnl-impact-card" class="glass-card" style="border-left:3px solid #8B5CF6;">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:#8B5CF6;">PNL Impact Estimator</span>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:8px;">
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-pnl-daily" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Daily PNL</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-pnl-monthly" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Monthly PNL</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-pnl-wr-delta" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--warning);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">WR Change</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-pnl-net-trades" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Net Trades</div>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px;">
        <div id="quant-pnl-by-asset"></div>
        <div id="quant-pnl-attribution"></div>
      </div>
    </div>
  </div>

  <!-- ═══ Panel: Validation ═══ -->
  <div class="quant-panel" id="quant-panel-validation" style="display:none;">

    <!-- Triple Gate: Walk-Forward V2 -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--agent-quant);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-quant);">Walk-Forward V2</span>
        <span id="quant-wfv2-badge" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);">--</span>
      </div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;font-size:0.72rem;font-family:var(--font-mono);">
        <div><span style="color:var(--text-muted);">Overfit Gap:</span> <span id="quant-wfv2-gap">--</span></div>
        <div><span style="color:var(--text-muted);">Stability:</span> <span id="quant-wfv2-stability">--</span></div>
        <div><span style="color:var(--text-muted);">PNL/day:</span> <span id="quant-wfv2-pnl">--</span></div>
        <div><span style="color:var(--text-muted);">Method:</span> <span id="quant-wfv2-method">--</span></div>
      </div>
    </div>

    <!-- Triple Gate: Monte Carlo -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--success);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--success);">Monte Carlo (10K sims)</span>
        <span id="quant-mc-badge" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);">--</span>
      </div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;font-size:0.72rem;font-family:var(--font-mono);">
        <div><span style="color:var(--text-muted);">Ruin Prob:</span> <span id="quant-mc-ruin">--</span></div>
        <div><span style="color:var(--text-muted);">Avg Drawdown:</span> <span id="quant-mc-dd">--</span></div>
        <div><span style="color:var(--text-muted);">Sharpe:</span> <span id="quant-mc-sharpe">--</span></div>
        <div><span style="color:var(--text-muted);">Profitable:</span> <span id="quant-mc-profitable">--</span></div>
      </div>
    </div>

    <!-- Triple Gate: CUSUM -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--warning);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--warning);">CUSUM Edge Decay</span>
        <span id="quant-cusum-badge" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);">--</span>
      </div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;font-size:0.72rem;font-family:var(--font-mono);">
        <div><span style="color:var(--text-muted);">Severity:</span> <span id="quant-cusum-severity">--</span></div>
        <div><span style="color:var(--text-muted);">Rolling WR:</span> <span id="quant-cusum-wr">--</span></div>
        <div><span style="color:var(--text-muted);">WR Drop:</span> <span id="quant-cusum-drop">--</span></div>
        <div><span style="color:var(--text-muted);">Since Change:</span> <span id="quant-cusum-since">--</span></div>
      </div>
    </div>

    <!-- Walk-Forward Fold Table -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid #3498DB;">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:#3498DB;">Walk-Forward Folds</span>
      <div style="overflow-x:auto;margin-top:8px;">
        <table style="width:100%;border-collapse:collapse;font-size:0.72rem;">
          <thead>
            <tr style="background:var(--surface-elevated);text-align:left;">
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Fold</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Train</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Train WR</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Test</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Test WR</th>
              <th style="padding:8px 10px;font-weight:600;color:var(--text-secondary);font-size:0.66rem;">Status</th>
            </tr>
          </thead>
          <tbody id="quant-wf-tbody"></tbody>
        </table>
      </div>
    </div>

    <!-- Intelligence: Regime + Correlation + Self-Learning -->
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;">
      <!-- Regime -->
      <div class="glass-card" style="border-left:3px solid var(--agent-atlas);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-atlas);">Regime Detection</span>
        <div style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);">
          <div><span style="color:var(--text-muted);">Current:</span> <span id="quant-regime-current">--</span></div>
          <div><span style="color:var(--text-muted);">Best:</span> <span id="quant-regime-best">--</span></div>
          <div><span style="color:var(--text-muted);">Worst:</span> <span id="quant-regime-worst">--</span></div>
          <div><span style="color:var(--text-muted);">Found:</span> <span id="quant-regime-count">--</span></div>
        </div>
        <div id="quant-regime-perf" style="margin-top:8px;font-size:0.68rem;color:var(--text-muted);"></div>
      </div>
      <!-- Correlation -->
      <div class="glass-card" style="border-left:3px solid var(--warning);">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--warning);">Correlation Guard</span>
          <span id="quant-corr-badge" style="font-family:var(--font-mono);font-size:0.64rem;color:var(--text-muted);">--</span>
        </div>
        <div style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);">
          <div><span style="color:var(--text-muted);">Risk:</span> <span id="quant-corr-risk">--</span></div>
          <div><span style="color:var(--text-muted);">Overlaps:</span> <span id="quant-corr-direct">--</span></div>
          <div><span style="color:var(--text-muted);">Correlated:</span> <span id="quant-corr-correlated">--</span></div>
          <div><span style="color:var(--text-muted);">Exposure:</span> <span id="quant-corr-exposure">--</span></div>
        </div>
        <div id="quant-corr-alert" style="margin-top:8px;font-size:0.68rem;color:var(--text-muted);"></div>
      </div>
      <!-- Self-Learning -->
      <div class="glass-card" style="border-left:3px solid var(--agent-quant);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-quant);">Self-Learning</span>
        <div style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);">
          <div><span style="color:var(--text-muted);">Accuracy:</span> <span id="quant-learn-accuracy">--</span></div>
          <div><span style="color:var(--text-muted);">Recs:</span> <span id="quant-learn-recs">--</span></div>
          <div><span style="color:var(--text-muted);">Combined WR:</span> <span id="quant-learn-combined-wr">--</span></div>
          <div><span style="color:var(--text-muted);">Odin Trades:</span> <span id="quant-learn-odin">--</span></div>
        </div>
        <div id="quant-learn-insights" style="margin-top:8px;font-size:0.68rem;color:var(--text-muted);"></div>
      </div>
    </div>
  </div>

  <!-- ═══ Panel: Analytics ═══ -->
  <div class="quant-panel" id="quant-panel-analytics" style="display:none;">

    <!-- Position Sizing & Strategy Health -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--success);">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--success);">Position Sizing &amp; Strategy Health</span>
      <div id="quant-analytics-detail" style="margin-top:8px;"></div>
    </div>

    <!-- Parameter Sensitivity -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--warning);">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--warning);">Parameter Sensitivity</span>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px;">
        <div>
          <div style="font-size:0.68rem;font-weight:700;color:var(--text-secondary);margin-bottom:6px;">Consensus Sensitivity</div>
          <div style="overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;font-size:0.72rem;">
              <thead>
                <tr style="background:var(--surface-elevated);text-align:left;">
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Min Consensus</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Avg WR</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Avg Signals</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Combos</th>
                </tr>
              </thead>
              <tbody id="quant-consensus-tbody"></tbody>
            </table>
          </div>
        </div>
        <div>
          <div style="font-size:0.68rem;font-weight:700;color:var(--text-secondary);margin-bottom:6px;">Edge Sensitivity</div>
          <div style="overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;font-size:0.72rem;">
              <thead>
                <tr style="background:var(--surface-elevated);text-align:left;">
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Min Edge</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Avg WR</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Avg Signals</th>
                  <th style="padding:6px 8px;font-weight:600;color:var(--text-secondary);font-size:0.64rem;">Combos</th>
                </tr>
              </thead>
              <tbody id="quant-edge-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Indicator Diversity -->
    <div class="glass-card" style="margin-bottom:12px;border-left:3px solid #cc66ff;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:#cc66ff;">Indicator Diversity</span>
        <span id="quant-diversity-badge" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);"></span>
      </div>
      <div id="quant-diversity-detail" style="margin-top:8px;"></div>
    </div>

    <!-- Per-Trade Learning -->
    <div class="glass-card" style="border-left:3px solid #FFD700;" id="quant-learning-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:#FFD700;">Per-Trade Learning</span>
        <span id="quant-learn-total" style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text-muted);">--</span>
      </div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:10px;">
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-learn-studied" style="font-size:1rem;font-weight:800;font-family:var(--font-mono);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Trades Studied</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-learn-filter" style="font-size:1rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Filter Correctness</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-learn-ind-acc" style="font-size:1rem;font-weight:800;font-family:var(--font-mono);color:var(--warning);">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Avg Indicator Acc</div>
        </div>
        <div class="glass-card" style="text-align:center;padding:10px;">
          <div id="quant-learn-mini-opts" style="font-size:1rem;font-weight:800;font-family:var(--font-mono);color:#8B5CF6;">--</div>
          <div style="font-size:0.62rem;color:var(--text-muted);">Mini-Opts Run</div>
        </div>
      </div>
      <div id="quant-learn-indicators" style="display:flex;flex-wrap:wrap;gap:4px;margin-bottom:10px;"></div>
      <div id="quant-learn-mini-opt-summary" style="display:none;font-size:0.72rem;margin-bottom:8px;"></div>
      <div id="quant-learn-recent" style="max-height:180px;overflow-y:auto;font-size:0.72rem;"></div>
    </div>
  </div>

  <!-- ═══ Panel: Odin Backtest ═══ -->
  <div class="quant-panel" id="quant-panel-odin" style="display:none;">

    <!-- Overview Stats -->
    <div style="display:grid;grid-template-columns:repeat(6,1fr);gap:10px;margin-bottom:12px;">
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-trades" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:#8B5CF6;">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Trades</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-wr" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Win Rate</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-pnl" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--warning);">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Total PnL</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-sharpe" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--agent-quant);">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Sharpe</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-dd" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--error);">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Max DD</div>
      </div>
      <div class="glass-card" style="text-align:center;padding:10px;">
        <div id="qt-odin-bt-pf" style="font-size:1.1rem;font-weight:800;font-family:var(--font-mono);color:var(--success);">--</div>
        <div style="font-size:0.62rem;color:var(--text-muted);">Profit Factor</div>
      </div>
    </div>

    <!-- R-multiples + PnL Detail + Exit Analysis -->
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:12px;">
      <div class="glass-card" style="border-left:3px solid #8B5CF6;">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:#8B5CF6;">R-Multiples</span>
        <div style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);">
          <div><span style="color:var(--text-muted);">Avg R:</span> <span id="qt-odin-bt-avgr">--</span></div>
          <div><span style="color:var(--text-muted);">Avg Win R:</span> <span id="qt-odin-bt-avgwinr">--</span></div>
          <div><span style="color:var(--text-muted);">Avg Loss R:</span> <span id="qt-odin-bt-avglossr">--</span></div>
          <div><span style="color:var(--text-muted);">Max Win Streak:</span> <span id="qt-odin-bt-maxw">--</span></div>
          <div><span style="color:var(--text-muted);">Max Loss Streak:</span> <span id="qt-odin-bt-maxl">--</span></div>
        </div>
      </div>
      <div class="glass-card" style="border-left:3px solid var(--agent-quant);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-quant);">PnL Detail</span>
        <div style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);">
          <div><span style="color:var(--text-muted);">Avg Win:</span> <span id="qt-odin-bt-avgwin">--</span></div>
          <div><span style="color:var(--text-muted);">Avg Loss:</span> <span id="qt-odin-bt-avgloss">--</span></div>
          <div><span style="color:var(--text-muted);">Largest Win:</span> <span id="qt-odin-bt-bigwin">--</span></div>
          <div><span style="color:var(--text-muted);">Largest Loss:</span> <span id="qt-odin-bt-bigloss">--</span></div>
          <div><span style="color:var(--text-muted);">Avg Hold:</span> <span id="qt-odin-bt-hold">--</span></div>
        </div>
      </div>
      <div class="glass-card" style="border-left:3px solid var(--warning);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--warning);">Exit Analysis</span>
        <div id="qt-odin-bt-exits" style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);"></div>
      </div>
    </div>

    <!-- By Direction + Regime + Symbol -->
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:12px;">
      <div class="glass-card" style="border-left:3px solid var(--agent-quant);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);">By Direction</span>
        <div id="qt-odin-bt-dir" style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);"></div>
      </div>
      <div class="glass-card" style="border-left:3px solid #8B5CF6;">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);">By Regime</span>
        <div id="qt-odin-bt-regime" style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);"></div>
      </div>
      <div class="glass-card" style="border-left:3px solid var(--success);">
        <span style="font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);">By Symbol</span>
        <div id="qt-odin-bt-symbol" style="margin-top:8px;font-size:0.72rem;font-family:var(--font-mono);"></div>
      </div>
    </div>

    <!-- Meta -->
    <div id="qt-odin-bt-meta" style="font-family:var(--font-mono);font-size:0.64rem;color:var(--text-muted);"></div>

    <!-- Hawk Trade Review -->
    <div class="glass-card" style="margin-top:12px;border-left:3px solid var(--agent-hawk);">
      <span style="font-family:var(--font-mono);font-size:0.72rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--agent-hawk);">Hawk Trade Review</span>
      <div id="quant-hawk-review" style="margin-top:8px;"></div>
    </div>
  </div>

  <!-- Hidden compat elements -->
  <div style="display:none;">
    <span id="quant-total-combos">--</span>
    <span id="quant-ci">--</span>
    <span id="quant-avg-edge">--</span>
    <span id="quant-filtered">--</span>
    <span id="quant-overfit">--</span>
    <span id="quant-pnl-badge">--</span>
    <span id="qt-status-pill"></span>
    <span id="qt-phase1-badge"></span>
    <span id="qt-phase2-badge"></span>
    <span id="qt-phase3-badge"></span>
    <span id="qt-odin-bt-badge"></span>
    <div id="quant-version-history" style="display:none;">
      <div id="quant-versions-list"></div>
    </div>
  </div>

</div>
