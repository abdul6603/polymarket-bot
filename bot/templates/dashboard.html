<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Command Center</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
<link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
<nav class="sidebar">
  <div class="sidebar-brand">CC</div>
  <button class="sidebar-btn active" data-tab="overview" onclick="switchTab('overview')" title="Overview">Overview</button>
  <button class="sidebar-btn" data-tab="garves-live" onclick="switchTab('garves-live')" title="Garves Live" style="color:#00ff88;">Garves $</button>
  <button class="sidebar-btn" data-tab="garves" onclick="switchTab('garves')" title="Garves Sim">Garves Sim</button>
  <button class="sidebar-btn" data-tab="soren" onclick="switchTab('soren')" title="Soren">Soren</button>
  <button class="sidebar-btn" data-tab="shelby" onclick="switchTab('shelby')" title="Shelby">Shelby</button>
  <button class="sidebar-btn" data-tab="atlas" onclick="switchTab('atlas')" title="Atlas">Atlas</button>
  <button class="sidebar-btn" data-tab="mercury" onclick="switchTab('mercury')" title="Lisa">Lisa</button>
  <button class="sidebar-btn" data-tab="sentinel" onclick="switchTab('sentinel')" title="Robotox">Robotox</button>
  <button class="sidebar-btn" data-tab="thor" onclick="switchTab('thor')" title="Thor">Thor</button>
  <div class="sidebar-spacer"></div>
  <button class="sidebar-btn" data-tab="chat" onclick="switchTab('chat')" title="Chat">Chat</button>
</nav>

<main class="main">
  <header class="header">
    <div class="header-left">
      <h1 class="header-title">Command Center</h1>
      <div class="header-subtitle"><span class="dot-online"></span> 7 Agents Online</div>
    </div>
    <div class="header-right">Last update: <span id="last-update">--:--:--</span></div>
  </header>

  <!-- OVERVIEW -->
  <div class="tab-content active" id="tab-overview">
    <div id="team-intelligence" class="team-intel-panel"></div>
    <div id="overview-atlas-countdown" style="margin-bottom:10px;"></div>
    <h2 class="section-title">Agent Status</h2>
    <div class="grid-auto" id="agent-grid"></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">System Infrastructure</h2>
      <div class="grid-4" id="infra-stats">
        <div class="stat-card" data-accent="success"><div class="stat-value" id="infra-health">--</div><div class="stat-label">System Health</div></div>
        <div class="stat-card" data-accent="shelby"><div class="stat-value" id="infra-agents-alive">--</div><div class="stat-label">Heartbeats</div></div>
        <div class="stat-card" data-accent="atlas"><div class="stat-value" id="infra-broadcasts">--</div><div class="stat-label">Broadcasts</div></div>
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="infra-services">--</div><div class="stat-label">Services</div></div>
      </div>
      <div class="grid-2 mt-3">
        <div class="glass-card">
          <h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">Agent Heartbeats</h3>
          <div id="infra-heartbeat-list" style="font-family:var(--font-mono);font-size:0.76rem;"><span class="text-muted">Loading heartbeats...</span></div>
        </div>
        <div class="glass-card">
          <h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">Recent Broadcasts</h3>
          <div id="infra-broadcast-list" style="font-family:var(--font-mono);font-size:0.76rem;max-height:200px;overflow-y:auto;"><span class="text-muted">Loading broadcasts...</span></div>
        </div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Indicator Accuracy</h2>
      <div class="glass-card" id="indicator-accuracy"><table class="data-table"><thead><tr><th>Indicator</th><th>Accuracy</th><th>Signals</th><th>Correct</th><th>Weight</th></tr></thead><tbody id="indicator-tbody"><tr><td colspan="5" class="text-muted" style="text-align:center;padding:24px;">Waiting for data...</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <div class="flex items-center justify-between mb-4">
        <h2 class="section-title" data-accent="atlas">4-Hour Report</h2>
        <button class="btn btn-primary" onclick="generate4hReport()">Generate Report</button>
      </div>
      <div class="report-container" id="report-4h-content">Click "Generate Report" to create one.</div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" style="color:#e0e0e0;">Claude (The Godfather) — Commands</h2>
      <div class="glass-card"><div id="claude-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" style="color:#e0e0e0;">Claude (The Godfather) — Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="claude-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="claude-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('claude')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="claude-brain-content" placeholder="Knowledge, instructions, or notes for Claude..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="claude-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- GARVES LIVE (Real Money) -->
  <div class="tab-content" id="tab-garves-live">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
      <span style="background:#00ff88;color:#000;font-weight:700;padding:4px 12px;border-radius:6px;font-size:0.8rem;">LIVE TRADING</span>
      <span class="text-muted" style="font-size:0.76rem;">Real money — $100 USDC bankroll</span>
    </div>
    <div class="grid-6" id="live-stats-grid">
      <div class="stat-card" data-accent="success"><div class="stat-value" id="live-winrate">--</div><div class="stat-label">Win Rate</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="live-pnl">--</div><div class="stat-label">PnL</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-wins-losses">--</div><div class="stat-label">Wins / Losses</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-total">--</div><div class="stat-label">Total</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-resolved">--</div><div class="stat-label">Resolved</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="live-pending">--</div><div class="stat-label">Pending</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Breakdowns</h2>
      <div class="grid-3" id="live-breakdowns">
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Asset</h3><table class="data-table"><thead><tr><th>Asset</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-asset"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Timeframe</h3><table class="data-table"><thead><tr><th>TF</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-tf"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Direction</h3><table class="data-table"><thead><tr><th>Dir</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-dir"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="warning">Pending Trades</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Market</th><th>Direction</th><th>Edge</th><th>Consensus</th><th>Status</th></tr></thead><tbody id="live-pending-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;padding:24px;">No pending trades</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Resolved Trades</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Market</th><th>Direction</th><th>Edge</th><th>Result</th><th>PnL</th></tr></thead><tbody id="live-resolved-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;padding:24px;">No resolved trades yet — Garves is waiting for signals</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Live Log</h2>
      <div class="log-feed" id="live-log-feed"><div class="log-line"><span class="log-time">--:--:--</span><span class="log-msg">Waiting for log data...</span></div></div>
    </div>
  </div>

  <!-- GARVES SIM (Dry Run) -->
  <div class="tab-content" id="tab-garves">
    <div id="intel-garves" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="garves-widgets">
      <div class="widget-badge" id="garves-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal(&apos;garves&apos;)" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent(&apos;garves&apos;)" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="garves-health-result"></div>
    <div class="grid-6" id="stats-grid">
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="garves-winrate">--</div><div class="stat-label">Win Rate</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="garves-pnl">--</div><div class="stat-label">PnL</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="garves-wins-losses">--</div><div class="stat-label">Wins / Losses</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="garves-total">--</div><div class="stat-label">Total</div></div>
      <div class="stat-card" data-accent="garves"><div class="stat-value" id="garves-resolved">--</div><div class="stat-label">Resolved</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="garves-pending">--</div><div class="stat-label">Pending</div></div>
    </div>
    <div class="mt-6" id="garves-regime-badge"><span class="badge badge-info">Regime: --</span></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">ConvictionEngine</h2>
      <div class="grid-4" id="conviction-stats">
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="conv-rolling-wr">--</div><div class="stat-label">Rolling WR (20)</div></div>
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="conv-streak">--</div><div class="stat-label">Streak</div></div>
        <div class="stat-card" data-accent="success"><div class="stat-value" id="conv-daily-pnl">--</div><div class="stat-label">Daily PnL</div></div>
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="conv-total-resolved">--</div><div class="stat-label">Total Resolved</div></div>
      </div>
      <div class="grid-3 mt-3" id="conv-asset-signals"></div>
      <div class="mt-3">
        <h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">Indicator Weights</h3>
        <div class="glass-card"><table class="data-table"><thead><tr><th>Indicator</th><th>Base</th><th>Dynamic</th><th>Accuracy</th><th>Samples</th><th>Status</th></tr></thead><tbody id="conv-weights-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;">Loading...</td></tr></tbody></table></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Breakdowns</h2>
      <div class="grid-3" id="breakdowns">
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Asset</h3><table class="data-table"><thead><tr><th>Asset</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="bd-asset"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Timeframe</h3><table class="data-table"><thead><tr><th>TF</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="bd-tf"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Direction</h3><table class="data-table"><thead><tr><th>Dir</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="bd-dir"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="warning">Pending Trades</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Market</th><th>Direction</th><th>Edge</th><th>Consensus</th><th>Status</th></tr></thead><tbody id="pending-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;padding:24px;">No pending trades</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Resolved Trades</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Market</th><th>Direction</th><th>Edge</th><th>Result</th><th>PnL</th></tr></thead><tbody id="resolved-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;padding:24px;">No resolved trades</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Daily Performance History</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Date</th><th>Trades</th><th>W-L</th><th>Win Rate</th><th>PnL</th><th>Avg Edge</th><th>Regime</th><th>Issues</th></tr></thead><tbody id="daily-history-tbody"><tr><td colspan="8" class="text-muted" style="text-align:center;padding:24px;">No daily reports yet</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="warning">Today's Mistake Analysis</h2>
      <div id="daily-mistakes" class="flex flex-col gap-2"><div class="text-muted" style="padding:var(--space-4);">Loading analysis...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Derivatives Intelligence</h2>
      <div class="grid grid-3" id="deriv-cards">
        <div class="glass-card" id="deriv-funding"><div class="stat-label">Funding Rates</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="deriv-liquidations"><div class="stat-label">Liquidations (5m)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="deriv-depth"><div class="stat-label">Spot Depth (Top 5)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Live Log</h2>
      <div class="log-feed" id="log-feed"><div class="log-line"><span class="log-time">--:--:--</span><span class="log-msg">Waiting for log data...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">News Sentiment</h2>
      <div class="grid-3" id="garves-sentiment-grid"><div class="text-muted" style="padding:var(--space-4);grid-column:1/-1;text-align:center;">Loading sentiment data...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Suggested Actions</h2>
      <div id="garves-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="garves-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="garves-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="garves-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('garves')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="garves-brain-content" placeholder="Knowledge, instructions, or notes for Garves..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="garves-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- SOREN -->
  <div class="tab-content" id="tab-soren">
    <div id="intel-soren" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="soren-widgets">
      <div class="widget-badge" id="soren-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal(&apos;soren&apos;)" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent(&apos;soren&apos;)" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="soren-health-result"></div>
    <div class="grid-4" id="soren-stats">
      <div class="stat-card" data-accent="soren"><div class="stat-value" id="soren-queue-total">--</div><div class="stat-label">Queue Total</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="soren-pending">--</div><div class="stat-label">Pending</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="soren-posted">--</div><div class="stat-label">Posted</div></div>
      <div class="stat-card" data-accent="error"><div class="stat-value" id="soren-failed">--</div><div class="stat-label">Failed</div></div>
    </div>
    <div id="soren-freshness" style="margin-bottom:8px;"></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="soren">Content Queue</h2>
      <div class="flex flex-col gap-3" id="soren-queue"><div class="queue-item"><div class="queue-item-header"><span class="queue-item-title">Loading...</span></div></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="soren">Competitor Intelligence</h2>
      <div class="glass-card" id="soren-competitors"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No competitor data yet.</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="soren">Suggested Actions</h2>
      <div id="soren-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="soren">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="soren-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="soren">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="soren-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="soren-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('soren')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="soren-brain-content" placeholder="Knowledge, instructions, or notes for Soren..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="soren-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- SHELBY -->
  <div class="tab-content" id="tab-shelby">
    <div id="intel-shelby" class="intel-meter" style="margin-bottom:12px;"></div>
    <!-- Stat Cards Row -->
    <div class="grid-4">
      <div class="stat-card" data-accent="shelby"><div class="stat-value" id="shelby-agents-online">--</div><div class="stat-label">Agents Online</div></div>
      <div class="stat-card" data-accent="shelby"><div class="stat-value" id="shelby-agents-working">--</div><div class="stat-label">Agents Working</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="shelby-tasks-total">--</div><div class="stat-label">Total Tasks</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="shelby-health-badge">--</div><div class="stat-label">System Health</div></div>
    </div>

    <!-- Actions Row -->
    <div class="mt-4 flex items-center gap-3 flex-wrap">
      <div class="telegram-status" style="background:rgba(0,255,136,0.08);border:1px solid rgba(0,255,136,0.15);">
        <span class="telegram-dot" id="telegram-dot" style="background:var(--success);"></span>
        <span id="telegram-status-text" style="color:var(--success);">Telegram Connected</span>
      </div>
      <button class="btn btn-primary" onclick="exportAgentReport()">Download Report</button>
    </div>

    <!-- Activity Brief -->
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Activity Brief (Last 30 min)</h2>
      <div class="glass-card" id="shelby-activity-brief"><div class="text-muted" style="text-align:center;padding:var(--space-4);">Loading activity...</div></div>
    </div>

    <!-- Agent Tasks + Progress -->
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Agent Tasks &amp; Progress</h2>
      <div class="flex flex-col gap-3" id="shelby-agent-tasks"><div class="text-muted" style="padding:var(--space-4);">Loading tasks...</div></div>
    </div>

    <!-- System & Weather -->
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">System &amp; Weather</h2>
      <div class="grid-2">
        <div class="system-card" id="shelby-system-info"><div class="text-muted">Loading system info...</div></div>
        <div class="system-card" id="shelby-weather"><div class="text-muted">Loading weather...</div></div>
      </div>
    </div>

    <!-- Daily Schedule -->
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Daily Schedule</h2>
      <div class="flex flex-col gap-2" id="shelby-schedule"><div class="text-muted" style="padding:var(--space-4);">Loading schedule...</div></div>
    </div>

    <!-- Shelby's Assessments -->
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Shelby&apos;s Assessment</h2>
      <div class="grid-3" id="shelby-assessments"><div class="text-muted" style="padding:var(--space-4);">Loading assessments...</div></div>
    </div>

    <!-- Agent Economics -->
    <div class="section-spacer">
      <div class="flex items-center justify-between mb-4">
        <h2 class="section-title" data-accent="shelby">Agent Economics</h2>
        <div class="btn-group">
          <button class="btn" onclick="setEconPeriod(&apos;today&apos;)">Today</button>
          <button class="btn" onclick="setEconPeriod(&apos;week&apos;)">Week</button>
          <button class="btn btn-primary" onclick="setEconPeriod(&apos;month&apos;)">Month</button>
          <button class="btn" onclick="setEconPeriod(&apos;all_time&apos;)">All</button>
        </div>
      </div>
      <div class="glass-card" id="shelby-economics"><div class="text-muted" style="text-align:center;padding:var(--space-6);">Loading economics...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Decision Memory</h2>
      <div class="glass-card" id="shelby-decisions"><div class="text-muted" style="text-align:center;padding:var(--space-4);">Loading decisions...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Suggested Actions</h2>
      <div id="shelby-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="shelby-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="shelby">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="shelby-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="shelby-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('shelby')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="shelby-brain-content" placeholder="Knowledge, instructions, or notes for Shelby..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="shelby-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- ATLAS -->
  <div class="tab-content" id="tab-atlas">
    <div id="intel-atlas" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="atlas-widgets">
      <div class="widget-badge" id="atlas-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal(&apos;atlas&apos;)" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent(&apos;atlas&apos;)" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="atlas-health-result"></div>
    <div class="grid-4">
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-uptime" style="font-size:1rem;">--</div><div class="stat-label">Uptime</div></div>
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-observations">--</div><div class="stat-label">Observations</div></div>
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-learnings">--</div><div class="stat-label">Lessons Learned</div></div>
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-improvements">--</div><div class="stat-label">Improvements</div></div>
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-cycles">--</div><div class="stat-label">Cycles</div></div>
      <div class="stat-card" data-accent="atlas"><div class="stat-value" id="atlas-quality-score">--</div><div class="stat-label">Research Quality</div></div>
    </div>
    <div id="atlas-hierarchy" class="glass-card" style="margin-top:12px;margin-bottom:12px;"></div>
    <div id="atlas-bg-status" class="glass-card" style="margin-top:12px;margin-bottom:12px;"></div>
    <div id="atlas-cost-panel" style="margin-bottom:12px;padding:12px 16px;background:var(--surface-secondary);border-radius:8px;"></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Actions</h2>
      <div class="btn-group">
        <button class="btn btn-primary" onclick="atlasFullReport()">Full Report</button>
        <button class="btn" onclick="atlasAnalyze('garves')" style="color:var(--agent-garves);">Analyze Garves</button>
        <button class="btn" onclick="atlasAnalyze('soren')" style="color:var(--agent-soren);">Analyze Soren</button>
        <button class="btn" onclick="atlasAnalyze('shelby')" style="color:var(--agent-shelby);">Analyze Shelby</button>
        <button class="btn" onclick="atlasAnalyze('mercury')" style="color:var(--agent-mercury);">Analyze Lisa</button>
        <button class="btn btn-warning" onclick="atlasSuggestImprovements()">Improvements</button>
        <button class="btn" onclick="atlasAcknowledgeImprovements()" style="color:var(--text-secondary);">Dismiss All</button>
        <button class="btn" onclick="atlasLiveResearch()" style="color:var(--agent-atlas);">Live Research</button>
      </div>
    </div>
    <div id="atlas-live-research" style="display:none;margin-bottom:12px;padding:12px 16px;background:var(--surface-secondary);border-radius:8px;max-height:400px;overflow-y:auto;"></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Report / Analysis</h2>
      <div class="report-container" id="atlas-report">Run an analysis or generate a report to see results here.</div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Competitor Intel</h2>
      <div class="glass-card" id="atlas-competitors"><div class="text-muted" style="text-align:center;padding:var(--space-6);">No competitor intel yet.</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Trade Journal Analysis</h2>
      <div class="glass-card" id="atlas-trade-analysis"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No trade analysis yet.</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Suggested Actions</h2>
      <div id="atlas-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="atlas-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="atlas-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="atlas-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('atlas')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="atlas-brain-content" placeholder="Knowledge, instructions, or notes for Atlas..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="atlas-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- MERCURY -->
  <div class="tab-content" id="tab-mercury">
    <div id="intel-lisa" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="mercury-widgets">
      <div class="widget-badge" id="mercury-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal(&apos;mercury&apos;)" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent(&apos;mercury&apos;)" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="mercury-health-result"></div>
    <div class="grid-4">
      <div class="stat-card" data-accent="mercury"><div class="stat-value" id="mercury-outbox-stat">--</div><div class="stat-label">Outbox</div></div>
      <div class="stat-card" data-accent="mercury"><div class="stat-value" id="mercury-total-posted">--</div><div class="stat-label">Posted</div></div>
      <div class="stat-card" data-accent="mercury"><div class="stat-value" id="mercury-platforms-count">--</div><div class="stat-label">Platforms</div></div>
      <div class="stat-card" data-accent="mercury"><div class="stat-value" id="mercury-review-avg">--</div><div class="stat-label">Avg Review</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Brand Review Gate</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-3);margin-bottom:var(--space-4);flex-wrap:wrap;">
          <div id="mercury-review-stats" style="display:flex;gap:var(--space-4);font-size:0.76rem;font-family:var(--font-mono);align-items:center;">
            <span class="text-muted">No reviews yet</span>
          </div>
        </div>
        <div style="font-size:0.78rem;color:var(--text-secondary);margin-bottom:var(--space-3);">Test any caption against Soren&apos;s brand voice:</div>
        <div style="display:flex;gap:var(--space-3);margin-bottom:var(--space-3);flex-wrap:wrap;align-items:end;">
          <div style="flex:1;min-width:200px;">
            <textarea class="input" id="mercury-review-caption" rows="2" placeholder="Paste a caption to review..." style="width:100%;resize:vertical;font-family:var(--font-mono);font-size:0.78rem;"></textarea>
          </div>
          <div style="display:flex;gap:var(--space-2);flex-direction:column;">
            <select class="input" id="mercury-review-platform" style="font-size:0.76rem;padding:4px 8px;">
              <option value="instagram">Instagram</option>
              <option value="tiktok">TikTok</option>
              <option value="x">X</option>
            </select>
            <button class="btn btn-primary" onclick="mercuryReviewCaption()" style="white-space:nowrap;">Review Caption</button>
          </div>
        </div>
        <div id="mercury-review-result" style="min-height:40px;font-family:var(--font-mono);font-size:0.76rem;"></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Outbox — Brand Check</h2>
      <div class="glass-card" id="mercury-outbox-review"><div class="text-muted">No approved items in outbox.</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Strategy Plan</h2>
      <div class="glass-card" id="mercury-plan"><div class="text-muted">Loading plan...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Knowledge Base</h2>
      <div class="flex flex-col gap-2" id="mercury-knowledge"><div class="text-muted">Loading knowledge...</div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Reply Intelligence</h2>
      <div class="glass-card">
        <div class="flex gap-2" style="margin-bottom:var(--space-4);">
          <input type="text" class="input" id="mercury-reply-input" placeholder="Paste a comment to test reply..." />
          <button class="btn btn-primary" onclick="mercuryTestReply()">Test</button>
        </div>
        <div class="report-container" id="mercury-reply-result" style="min-height:60px;">Enter a comment and click "Test" to see reply suggestion.</div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Recent Posts</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Platform</th><th>Content</th><th>Score</th><th>Status</th></tr></thead><tbody id="mercury-posts-tbody"><tr><td colspan="5" class="text-muted" style="text-align:center;padding:24px;">No posts yet</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Go-Live Toggle</h2>
      <div class="glass-card" id="lisa-golive-panel">
        <div style="font-size:0.78rem;color:var(--text-secondary);margin-bottom:var(--space-3);">Toggle platforms between dry-run and live posting:</div>
        <div class="grid-3" id="lisa-golive-toggles"><div class="text-muted" style="text-align:center;">Loading...</div></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="mercury">Comment Analyzer</h2>
      <div class="glass-card">
        <div class="grid-3" id="lisa-comment-stats" style="margin-bottom:var(--space-4);"><div class="text-muted" style="grid-column:1/-1;text-align:center;">No comment data yet</div></div>
        <div style="display:flex;gap:var(--space-3);margin-bottom:var(--space-3);flex-wrap:wrap;align-items:end;">
          <div style="flex:1;min-width:200px;">
            <textarea class="input" id="lisa-comment-input" rows="2" placeholder="Paste a comment to analyze..." style="width:100%;resize:vertical;font-family:var(--font-mono);font-size:0.78rem;"></textarea>
          </div>
          <div style="display:flex;gap:var(--space-2);flex-direction:column;">
            <select class="input" id="lisa-comment-platform" style="font-size:0.76rem;padding:4px 8px;">
              <option value="instagram">Instagram</option>
              <option value="tiktok">TikTok</option>
              <option value="x">X</option>
            </select>
            <button class="btn btn-primary" onclick="lisaAnalyzeComment()">Analyze</button>
          </div>
        </div>
        <div id="lisa-comment-result" style="min-height:40px;font-family:var(--font-mono);font-size:0.76rem;"></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="lisa">Suggested Actions</h2>
      <div id="lisa-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="lisa">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="lisa-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="lisa">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="lisa-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="lisa-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('lisa')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="lisa-brain-content" placeholder="Knowledge, instructions, or notes for Lisa..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="lisa-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- ROBOTOX -->
  <div class="tab-content" id="tab-sentinel">
    <div id="intel-robotox" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="sentinel-widgets">
      <div class="widget-badge" id="sentinel-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal(&apos;sentinel&apos;)" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent(&apos;sentinel&apos;)" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="sentinel-health-result"></div>
    <div class="grid-4">
      <div class="stat-card" data-accent="sentinel"><div class="stat-value" id="sentinel-agents-online">--</div><div class="stat-label">Agents Online</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="sentinel-active-issues">--</div><div class="stat-label">Issues</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="sentinel-total-fixes">--</div><div class="stat-label">Fixes</div></div>
      <div class="stat-card" data-accent="sentinel"><div class="stat-value" id="sentinel-last-scan">--</div><div class="stat-label">Last Scan</div></div>
    </div>
    <div id="sentinel-error-trend" style="margin-bottom:8px;padding:8px 12px;background:var(--surface-secondary);border-radius:8px;"></div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Actions</h2>
      <div class="btn-group">
        <button class="btn btn-success" onclick="sentinelScan()">Health Scan</button>
        <button class="btn btn-warning" onclick="sentinelBugs()">Bug Scan</button>
      </div>
    </div>
    <div class="section-spacer">
      <div class="report-container" id="sentinel-report" style="display:none;"></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Alerts</h2>
      <div class="feed-scroll" id="sentinel-alerts"><div class="feed-item"><span class="badge badge-success">OK</span> <span style="font-family:var(--font-mono);font-size:0.76rem;color:var(--text-secondary);margin-left:8px;">All systems nominal</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Fix History</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Time</th><th>Agent</th><th>Action</th><th>Status</th></tr></thead><tbody id="sentinel-fixes-tbody"><tr><td colspan="4" class="text-muted" style="text-align:center;padding:24px;">No fixes</td></tr></tbody></table></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Dependency Checker</h2>
      <div class="glass-card" id="robotox-deps-panel">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-3);">
          <span class="text-muted" style="font-size:0.78rem;" id="robotox-deps-last-check">Last check: never</span>
          <button class="btn" onclick="robotoxDepCheck()" style="font-size:0.72rem;">Run Check</button>
        </div>
        <div id="robotox-deps-content"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No dependency report yet.</div></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Suggested Actions</h2>
      <div id="robotox-smart-actions" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px;"><span class="text-muted" style="font-size:0.76rem;">Loading...</span></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="robotox-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="sentinel">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="robotox-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="robotox-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('robotox')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="robotox-brain-content" placeholder="Knowledge, instructions, or notes for Robotox..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="robotox-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- THOR -->
  <div class="tab-content" id="tab-thor">
    <div id="intel-thor" class="intel-meter" style="margin-bottom:12px;"></div>
    <div class="agent-widget-row" id="thor-widgets">
      <div class="widget-badge" id="thor-state"><span class="wb-label">State:</span> <span>--</span></div>
      <div class="widget-badge" id="thor-model"><span class="wb-label">Model:</span> <span>--</span></div>
      <button class="btn" onclick="openKPIModal('thor')" style="font-size:0.72rem;">Performance KPIs</button>
      <button class="btn" onclick="healthCheckAgent('thor')" style="font-size:0.72rem;">Health Check</button>
    </div>
    <div class="health-inline" id="thor-health-result"></div>
    <div class="grid-6">
      <div class="stat-card" data-accent="thor"><div class="stat-value" id="thor-queue-pending">0</div><div class="stat-label">Pending Tasks</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="thor-completed">0</div><div class="stat-label">Completed</div></div>
      <div class="stat-card" data-accent="warning"><div class="stat-value" id="thor-failed">0</div><div class="stat-label">Failed</div></div>
      <div class="stat-card" data-accent="thor"><div class="stat-value" id="thor-knowledge">0</div><div class="stat-label">Knowledge Entries</div></div>
      <div class="stat-card" data-accent="thor"><div class="stat-value" id="thor-tokens">0</div><div class="stat-label">Tokens Used</div></div>
      <div class="stat-card" data-accent="success"><div class="stat-value" id="thor-success-rate">--</div><div class="stat-label">Success Rate</div></div>
    </div>

    <div class="section-spacer">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-3);">
        <h2 class="section-title" data-accent="thor" style="margin-bottom:0;">Smart Actions</h2>
        <button class="btn" onclick="loadSmartActions()" style="font-size:0.72rem;">Refresh</button>
      </div>
      <div id="thor-smart-actions" style="display:flex;flex-wrap:wrap;gap:8px;">
        <span class="text-muted">Loading live suggestions...</span>
      </div>
    </div>

    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Submit Custom Task</h2>
      <div class="glass-card">
        <div style="display:flex;flex-direction:column;gap:var(--space-3);">
          <input type="text" class="input" id="thor-custom-title" placeholder="Task title..." style="font-family:var(--font-mono);font-size:0.78rem;" />
          <textarea class="input" id="thor-custom-desc" rows="3" placeholder="Describe what Thor should do..." style="width:100%;resize:vertical;font-family:var(--font-mono);font-size:0.78rem;"></textarea>
          <div style="display:flex;gap:var(--space-3);align-items:center;">
            <input type="text" class="input" id="thor-custom-files" placeholder="Target files (comma-separated)" style="flex:1;font-size:0.76rem;" />
            <select class="input" id="thor-custom-priority" style="font-size:0.76rem;padding:4px 8px;">
              <option value="normal">Normal</option>
              <option value="high">High</option>
              <option value="critical">Critical</option>
            </select>
            <button class="btn btn-primary" onclick="thorSubmitCustomTask()">Submit Task</button>
          </div>
        </div>
      </div>
    </div>

    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Task Queue</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>ID</th><th>Title</th><th>Agent</th><th>Priority</th><th>Status</th></tr></thead><tbody id="thor-queue-tbody"><tr><td colspan="5" class="text-muted" style="text-align:center;padding:24px;">No tasks</td></tr></tbody></table></div>
    </div>

    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Recent Results</h2>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Task</th><th>Model</th><th>Files</th><th>Test</th><th>Phrase</th></tr></thead><tbody id="thor-results-tbody"><tr><td colspan="5" class="text-muted" style="text-align:center;padding:24px;">No results yet</td></tr></tbody></table></div>
    </div>

    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Activity Log</h2>
      <div class="glass-card" style="max-height:300px;overflow-y:auto;">
        <div id="thor-activity-log" style="font-family:monospace;font-size:0.75rem;padding:12px;color:var(--text-primary);">Waiting for data...</div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Commands &amp; Capabilities</h2>
      <div class="glass-card"><div id="thor-commands" style="max-height:250px;overflow-y:auto;"><span class="text-muted">Loading commands...</span></div></div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Brain Notes</h2>
      <div class="glass-card">
        <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-2);">
          <input type="text" class="input" id="thor-brain-topic" placeholder="Topic..." style="flex:1;font-size:0.76rem;padding:4px 8px;">
          <select class="input" id="thor-brain-type" style="width:auto;font-size:0.72rem;padding:4px 6px;"><option value="note">Note</option><option value="command">Command</option><option value="memory">Memory</option></select>
          <button class="btn btn-primary" onclick="addBrainNote('thor')" style="font-size:0.72rem;">Add</button>
        </div>
        <textarea class="input" id="thor-brain-content" placeholder="Knowledge, instructions, or notes for Thor..." style="width:100%;min-height:60px;font-size:0.76rem;padding:8px;resize:vertical;margin-bottom:var(--space-3);box-sizing:border-box;"></textarea>
        <div id="thor-brain-list" style="max-height:300px;overflow-y:auto;"><div class="text-muted" style="text-align:center;padding:var(--space-4);">No brain notes yet.</div></div>
      </div>
    </div>
  </div>

  <!-- CHAT -->
  <div class="tab-content" id="tab-chat">
    <h2 class="section-title">Group Chat</h2>
    <div class="chat-container">
      <div class="chat-messages" id="chat-messages">
        <div class="chat-msg">
          <div class="chat-msg-avatar" style="color:var(--agent-shelby);border-color:rgba(255,170,0,0.3);">SH</div>
          <div class="chat-msg-body"><div style="font-size:0.68rem;color:var(--agent-shelby);margin-bottom:2px;font-weight:600;">Shelby</div>Welcome to Command Center. All agents online.</div>
        </div>
      </div>
      <div class="chat-input-row">
        <select class="input" id="chat-agent-select">
          <option value="all">All Agents</option>
          <option value="shelby">Shelby</option>
          <option value="garves">Garves</option>
          <option value="soren">Soren</option>
          <option value="atlas">Atlas</option>
          <option value="mercury">Lisa</option>
          <option value="sentinel">Robotox</option>
        </select>
        <input type="text" class="input" id="chat-input" placeholder="Type a message..." onkeydown="chatKeyDown(event)" />
        <button class="btn btn-primary" id="chat-send-btn" onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <!-- Video Modal -->
  <div class="video-modal" id="video-modal">
    <div class="video-modal-inner">
      <video id="modal-video" controls></video>
      <div class="video-modal-btns">
        <button class="btn" id="modal-download-btn">Download</button>
        <button class="btn btn-error" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- KPI Modal -->
  <div class="generic-modal" id="kpi-modal">
    <div class="generic-modal-inner" style="position:relative;">
      <div class="modal-title" id="kpi-modal-title">Performance KPIs</div>
      <div id="kpi-modal-content"><div class="text-muted">Loading...</div></div>
      <div style="margin-top:var(--space-6);text-align:right;">
        <button class="btn btn-error" onclick="closeKPIModal()">Close</button>
      </div>
    </div>
  </div>


</main>

<script src="/static/dashboard.js"></script>
<script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
<script>
// SocketIO real-time connection (optional — degrades gracefully)
(function() {
  if (typeof io === 'undefined') return;
  try {
    var socket = io({transports: ['websocket', 'polling']});
    socket.on('connect', function() {
      console.log('[SocketIO] Connected to Command Center');
      var dot = document.querySelector('.dot-online');
      if (dot) dot.style.background = 'var(--success)';
    });
    socket.on('disconnect', function() {
      console.log('[SocketIO] Disconnected');
    });
    socket.on('heartbeats', function(data) {
      console.log('[SocketIO] Heartbeat push received');
    });
    window._ccSocket = socket;
  } catch(e) {
    console.log('[SocketIO] Not available, using polling');
  }
})();
</script>
</body>
</html>
