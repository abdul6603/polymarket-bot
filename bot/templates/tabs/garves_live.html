<!-- GARVES — Unified Trading Tab -->
<div class="tab-content" id="tab-garves-live">
  <!-- Health Warning Banner (auto-hidden when no warnings) -->
  <div id="garves-health-banner" style="display:none;margin-bottom:12px;padding:10px 16px;border-radius:8px;font-size:0.78rem;font-weight:600;"></div>
  <!-- Always visible: Intel meter + mode -->
  <div id="intel-garves" class="intel-meter" style="margin-bottom:12px;"></div>
  <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
    <span id="garves-mode-badge" class="trading-mode-badge trading-mode-live">Trading: Real Money</span>
    <button class="trading-mode-toggle" id="garves-mode-toggle" onclick="toggleGarvesMode()">Switch</button>
    <span class="text-muted" style="font-size:0.76rem;">BTC/ETH/SOL/XRP — <span id="garves-bankroll-label">-- bankroll</span></span>
</div>
  <div class="agent-widget-row" id="garves-widgets" style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
    <div class="widget-badge" id="garves-learning"><span class="wb-label">Learning:</span> <span>--</span></div>
    <button class="btn" onclick="healthCheckAgent('garves')" style="font-size:0.72rem;">Health Check</button>
    <!-- Binance Status Pill -->
    <div id="binance-pill-wrap" style="margin-left:auto;position:relative;">
      <div id="binance-pill" onclick="toggleBinancePopover()" style="
        display:inline-flex;align-items:center;gap:5px;
        padding:4px 12px;border-radius:20px;cursor:pointer;
        font-size:0.72rem;font-weight:600;font-family:var(--font-mono);
        background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);
        transition:all 0.3s ease;user-select:none;
      ">
        <span id="binance-pill-dot" style="font-size:0.8rem;">&#x26AB;</span>
        <span id="binance-pill-label">Binance</span>
        <span id="binance-pill-age" style="font-size:0.62rem;color:var(--text-muted);"></span>
      </div>
      <!-- Popover -->
      <div id="binance-popover" style="
        display:none;position:absolute;right:0;top:calc(100% + 6px);z-index:100;
        background:var(--bg-secondary);border:1px solid rgba(255,255,255,0.12);
        border-radius:10px;padding:14px 18px;min-width:260px;
        box-shadow:0 8px 32px rgba(0,0,0,0.4);font-size:0.72rem;
      ">
        <div style="font-weight:700;margin-bottom:8px;font-size:0.76rem;">Binance WebSocket</div>
        <div id="binance-pop-status" style="margin-bottom:4px;"></div>
        <div id="binance-pop-reconnects" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="binance-pop-stream" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="binance-pop-silence" style="color:var(--text-muted);margin-bottom:4px;"></div>
      </div>
    </div>
    <!-- CLOB Status Pill -->
    <div id="clob-pill-wrap" style="position:relative;">
      <div id="clob-pill" onclick="toggleClobPopover()" style="
        display:inline-flex;align-items:center;gap:5px;
        padding:4px 12px;border-radius:20px;cursor:pointer;
        font-size:0.72rem;font-weight:600;font-family:var(--font-mono);
        background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);
        transition:all 0.3s ease;user-select:none;
      ">
        <span id="clob-pill-dot" style="font-size:0.8rem;">&#x26AB;</span>
        <span id="clob-pill-label">CLOB</span>
        <span id="clob-pill-age" style="font-size:0.62rem;color:var(--text-muted);"></span>
      </div>
      <!-- Popover -->
      <div id="clob-popover" style="
        display:none;position:absolute;right:0;top:calc(100% + 6px);z-index:100;
        background:var(--bg-secondary);border:1px solid rgba(255,255,255,0.12);
        border-radius:10px;padding:14px 18px;min-width:260px;
        box-shadow:0 8px 32px rgba(0,0,0,0.4);font-size:0.72rem;
      ">
        <div style="font-weight:700;margin-bottom:8px;font-size:0.76rem;">CLOB WebSocket</div>
        <div id="clob-pop-status" style="margin-bottom:4px;"></div>
        <div id="clob-pop-detail" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="clob-pop-reconnects" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="clob-pop-proactive" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="clob-pop-uptime" style="color:var(--text-muted);margin-bottom:4px;"></div>
        <div id="clob-pop-silence" style="color:var(--text-muted);margin-bottom:10px;"></div>
        <button onclick="forceReconnectClob()" style="
          width:100%;padding:6px 0;border:none;border-radius:6px;cursor:pointer;
          background:rgba(239,68,68,0.15);color:#ef4444;font-weight:600;
          font-size:0.72rem;transition:background 0.2s;
        " onmouseover="this.style.background='rgba(239,68,68,0.3)'" onmouseout="this.style.background='rgba(239,68,68,0.15)'">Force Reconnect</button>
      </div>
    </div>
    <!-- Signal Cycle Badge -->
    <div id="signal-cycle-pill" style="
      display:inline-flex;align-items:center;gap:5px;
      padding:4px 12px;border-radius:20px;
      font-size:0.72rem;font-weight:600;font-family:var(--font-mono);
      background:rgba(139,92,246,0.1);border:1px solid rgba(139,92,246,0.25);
      transition:all 0.3s ease;cursor:default;position:relative;
    ">
      <span id="signal-cycle-dot" style="font-size:0.5rem;color:#8b5cf6;">&#x25CF;</span>
      <span id="signal-cycle-timer" style="color:#c4b5fd;">--</span>
      <span style="color:rgba(255,255,255,0.35);">|</span>
      <span id="signal-cycle-markets" style="color:var(--text-muted);">-- mkts</span>
      <div id="signal-cycle-tooltip" style="
        display:none;position:absolute;left:50%;bottom:calc(100% + 8px);transform:translateX(-50%);
        z-index:100;background:var(--bg-secondary);border:1px solid rgba(139,92,246,0.3);
        border-radius:8px;padding:10px 14px;min-width:220px;
        box-shadow:0 8px 32px rgba(0,0,0,0.4);font-size:0.68rem;text-align:left;
        font-weight:400;white-space:normal;
      ">
        <div style="font-weight:700;margin-bottom:6px;color:#c4b5fd;">Signal Pipeline</div>
        <div style="color:var(--text-muted);line-height:1.5;">
          20+ indicators per market: regime, momentum, sentiment, volume, derivatives, on-chain, correlation &amp; consensus scoring.
        </div>
        <div id="signal-cycle-detail" style="margin-top:6px;color:var(--text-muted);"></div>
      </div>
    </div>
  </div>
  <div class="health-inline" id="garves-health-result"></div>

  <!-- ═══ Snipe Engine v8 — Multi-Asset Scanner ═══ -->
  <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
    <div style="font-weight:700;font-size:0.76rem;">Snipe v8 Multi-Asset Scanner</div>
    <div id="snipe-exec-venue" style="font-size:0.62rem;padding:2px 8px;border-radius:10px;background:rgba(139,92,246,0.15);color:#8b5cf6;font-weight:600;cursor:pointer;" onclick="toggleExecVenue()">15m</div>
    <div id="snipe-positions-badge" style="font-size:0.62rem;padding:2px 8px;border-radius:10px;background:rgba(34,197,94,0.15);color:#22c55e;font-weight:600;">0/3</div>
    <div id="snipe-correlation-badge" style="font-size:0.62rem;padding:2px 8px;border-radius:10px;display:none;"></div>
  </div>

  <!-- 4-Asset Scanner Cards -->
  <div id="snipe-v8-cards" class="grid-4" style="margin-bottom:12px;">
    <div class="stat-card" id="snipe-card-bitcoin" style="border-left:3px solid #f7931a;">
      <div class="stat-value" id="snipe-score-bitcoin" style="font-size:1.2rem;color:#f7931a;">--</div>
      <div class="stat-label">BTC</div>
      <div id="snipe-state-bitcoin" style="font-size:0.62rem;color:var(--text-muted);margin-top:2px;">idle</div>
    </div>
    <div class="stat-card" id="snipe-card-ethereum" style="border-left:3px solid #627eea;">
      <div class="stat-value" id="snipe-score-ethereum" style="font-size:1.2rem;color:#627eea;">--</div>
      <div class="stat-label">ETH</div>
      <div id="snipe-state-ethereum" style="font-size:0.62rem;color:var(--text-muted);margin-top:2px;">idle</div>
    </div>
    <div class="stat-card" id="snipe-card-solana" style="border-left:3px solid #00ffa3;">
      <div class="stat-value" id="snipe-score-solana" style="font-size:1.2rem;color:#00ffa3;">--</div>
      <div class="stat-label">SOL</div>
      <div id="snipe-state-solana" style="font-size:0.62rem;color:var(--text-muted);margin-top:2px;">idle</div>
    </div>
    <div class="stat-card" id="snipe-card-xrp" style="border-left:3px solid #00aae4;">
      <div class="stat-value" id="snipe-score-xrp" style="font-size:1.2rem;color:#00aae4;">--</div>
      <div class="stat-label">XRP</div>
      <div id="snipe-state-xrp" style="font-size:0.62rem;color:var(--text-muted);margin-top:2px;">idle</div>
    </div>
  </div>

  <!-- Aggregate Stats Row -->
  <div id="snipe-v7-cards" class="grid-4" style="margin-bottom:12px;">
    <div class="stat-card" style="border-left:3px solid #22c55e;">
      <div class="stat-value" id="snipe-success-rate" style="font-size:1.3rem;">--</div>
      <div class="stat-label">Success Rate (50)</div>
      <div id="snipe-wl-record" style="font-size:0.64rem;color:var(--text-muted);margin-top:2px;"></div>
    </div>
    <div class="stat-card" style="border-left:3px solid #eab308;">
      <div class="stat-value" id="snipe-avg-latency" style="font-size:1.3rem;">--</div>
      <div class="stat-label">Avg Latency</div>
      <div id="snipe-latency-detail" style="font-size:0.64rem;color:var(--text-muted);margin-top:2px;"></div>
    </div>
    <div class="stat-card" style="border-left:3px solid #8b5cf6;">
      <div class="stat-value" id="snipe-signal-score" style="font-size:1.3rem;color:#8b5cf6;">--</div>
      <div class="stat-label">Last Score</div>
      <div id="snipe-score-dir" style="font-size:0.64rem;color:var(--text-muted);margin-top:2px;"></div>
    </div>
    <div class="stat-card" style="border-left:3px solid #06b6d4;">
      <div class="stat-value" id="snipe-clob-spread" style="font-size:1.3rem;">--</div>
      <div class="stat-label">CLOB Spread</div>
      <div id="snipe-state-label" style="font-size:0.64rem;color:var(--text-muted);margin-top:2px;"></div>
    </div>
  </div>

  <!-- Hot Windows Table (collapsible) -->
  <div id="snipe-hot-windows" style="margin-bottom:12px;display:none;">
    <div class="glass-card" style="padding:10px 14px;">
      <div style="font-weight:700;font-size:0.76rem;margin-bottom:8px;">Hot Windows</div>
      <table class="data-table"><thead><tr><th>Asset</th><th>Direction</th><th>Score</th><th>State</th></tr></thead>
      <tbody id="snipe-hot-tbody"><tr><td colspan="4" class="text-muted" style="text-align:center;">No hot windows</td></tr></tbody></table>
    </div>
  </div>

  <!-- Snipe Engine Warm-up Status -->
  <div id="snipe-warmup-card" style="margin-bottom:12px;display:none;"></div>

  <!-- Price Freshness Warning -->
  <div id="snipe-price-freshness" style="margin-bottom:12px;display:none;"></div>

  <!-- Snipe v7 Scoring Breakdown (collapsible) -->
  <div id="snipe-v7-breakdown" style="margin-bottom:12px;display:none;">
    <div class="glass-card" style="padding:10px 14px;">
      <div style="font-weight:700;font-size:0.76rem;margin-bottom:8px;">Signal Score Breakdown</div>
      <div id="snipe-score-bars" style="display:grid;grid-template-columns:1fr 1fr;gap:4px 16px;font-size:0.68rem;"></div>
    </div>
  </div>

  <!-- Snipe v8 Performance Tracking -->
  <div class="glass-card" style="padding:10px 14px;margin-bottom:12px;">
    <div style="font-weight:700;font-size:0.76rem;margin-bottom:8px;">Snipe v8 Performance</div>
    <div id="snipe-perf-stats" style="font-size:0.78rem;"></div>
  </div>

  <!-- ═══ Snipe Assist Live — Entry Timing Oracle ═══ -->
  <div class="glass-card" style="padding:10px 14px;margin-bottom:12px;border-left:3px solid #a855f7;">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
      <div style="font-weight:700;font-size:0.76rem;">Snipe Assist Live</div>
      <div id="sa-override-badge" style="font-size:0.62rem;padding:2px 8px;border-radius:10px;display:none;"></div>
    </div>
    <div class="grid-4" style="margin-bottom:8px;">
      <div class="stat-card" style="border-left:3px solid #a855f7;">
        <div class="stat-value" id="sa-timing-score" style="font-size:1.3rem;color:#a855f7;">--</div>
        <div class="stat-label">Timing Score</div>
      </div>
      <div class="stat-card" style="border-left:3px solid #06b6d4;">
        <div class="stat-value" id="sa-direction" style="font-size:1.3rem;">--</div>
        <div class="stat-label">Direction</div>
      </div>
      <div class="stat-card" style="border-left:3px solid #22c55e;">
        <div class="stat-value" id="sa-size-rec" style="font-size:1.3rem;">--</div>
        <div class="stat-label">Size Rec</div>
      </div>
      <div class="stat-card" style="border-left:3px solid #eab308;">
        <div class="stat-value" id="sa-accuracy" style="font-size:1.3rem;">--</div>
        <div class="stat-label">Accuracy (50)</div>
      </div>
    </div>
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
      <div id="sa-action-badge" style="font-size:0.72rem;font-weight:700;padding:3px 12px;border-radius:6px;background:rgba(255,255,255,0.06);">--</div>
      <span id="sa-age" style="font-size:0.62rem;color:var(--text-muted);"></span>
      <div style="margin-left:auto;display:flex;gap:6px;">
        <button onclick="snipeAssistOverride('force_execute')" style="font-size:0.64rem;padding:3px 8px;border:1px solid #22c55e;border-radius:4px;background:rgba(34,197,94,0.1);color:#22c55e;cursor:pointer;">Force Execute</button>
        <button onclick="snipeAssistOverride('force_skip')" style="font-size:0.64rem;padding:3px 8px;border:1px solid #ef4444;border-radius:4px;background:rgba(239,68,68,0.1);color:#ef4444;cursor:pointer;">Force Skip</button>
        <button onclick="snipeAssistOverride('clear')" style="font-size:0.64rem;padding:3px 8px;border:1px solid #888;border-radius:4px;background:rgba(255,255,255,0.05);color:#888;cursor:pointer;">Clear</button>
      </div>
    </div>
    <div id="sa-factors" style="display:grid;grid-template-columns:1fr 1fr;gap:3px 12px;font-size:0.66rem;margin-bottom:6px;"></div>
    <div id="sa-agents-row" style="display:flex;gap:12px;font-size:0.64rem;color:var(--text-muted);margin-bottom:4px;"></div>
    <div id="sa-learner-footer" style="font-size:0.62rem;color:var(--text-muted);"></div>
  </div>

  <!-- Hero cards: Portfolio, Cash, Real PnL -->
  <div class="grid-3" style="margin-bottom:12px;">
    <div class="stat-card" data-accent="success" style="border-left:3px solid var(--success);">
      <div class="stat-value" id="live-portfolio" style="font-size:1.4rem;">--</div>
      <div class="stat-label">Portfolio</div>
    </div>
    <div class="stat-card" data-accent="garves" style="border-left:3px solid var(--agent-garves);">
      <div class="stat-value" id="live-cash" style="font-size:1.4rem;">--</div>
      <div class="stat-label">Cash</div>
    </div>
    <div class="stat-card" data-accent="success" style="border-left:3px solid var(--warning);">
      <div class="stat-value" id="live-real-pnl" style="font-size:1.4rem;">--</div>
      <div class="stat-label">Real PnL</div>
      <div id="garves-loss-cap-bar" style="margin-top:6px;"></div>
    </div>
  </div>

  <!-- ═══ COLLAPSIBLE: Open Positions (default OPEN) ═══ -->
  <div class="collapse-section default-open">
    <div class="collapse-trigger">
      <h2 class="section-title" data-accent="garves" style="margin-bottom:0;">Open Positions
        <span id="positions-live-dot" style="width:8px;height:8px;border-radius:50%;background:#555;display:inline-block;animation:pulse-glow 2s ease-in-out infinite;margin-left:8px;"></span>
        <span style="font-size:0.64rem;color:var(--success);margin-left:4px;">LIVE</span>
      </h2>
    </div>
    <div class="collapse-body">
      <div class="glass-card"><table class="data-table"><thead><tr><th>Asset</th><th>Market</th><th>Bet</th><th>Shares</th><th>Entry</th><th>Now</th><th>Margin</th><th>Value</th><th>Resolves</th><th>P&L</th><th>Payout</th><th>Return</th></tr></thead>
      <tbody id="oc-holdings-tbody"><tr><td colspan="12" class="text-muted" style="text-align:center;padding:16px;">No open positions</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- 6 Stats Grid -->
  <div class="grid-6" id="live-stats-grid">
    <div class="stat-card" data-accent="success"><div class="stat-value" id="live-winrate">--</div><div class="stat-label">Win Rate</div></div>
    <div class="stat-card" data-accent="success"><div class="stat-value" id="live-pnl">--</div><div class="stat-label">Trade P&amp;L</div></div>
    <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-wins-losses">--</div><div class="stat-label">Wins / Losses</div></div>
    <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-total">--</div><div class="stat-label">Total</div></div>
    <div class="stat-card" data-accent="garves"><div class="stat-value" id="live-resolved">--</div><div class="stat-label">Resolved</div></div>
    <div class="stat-card" data-accent="warning"><div class="stat-value" id="live-pending">--</div><div class="stat-label">Pending</div></div>
  </div>

  <!-- Charts + Regime -->
  <div class="grid-2" style="margin-top:12px;">
    <div class="glass-card">
      <h3 class="section-title" style="font-size:0.72rem;margin-bottom:8px;">Equity Curve</h3>
      <div class="chart-container chart-sm"><canvas id="garves-pnl-chart"></canvas></div>
    </div>
    <div class="glass-card">
      <h3 class="section-title" style="font-size:0.72rem;margin-bottom:8px;">Win Rate</h3>
      <div class="chart-container chart-sm"><canvas id="garves-wr-donut"></canvas></div>
    </div>
  </div>
  <div class="mt-6" id="garves-regime-badge"><span class="badge badge-info">Regime: --</span></div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- COLLAPSIBLE: ML & Strategy (default open)  -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="collapse-section default-open" style="margin-top:var(--space-8);">
    <div class="collapse-trigger">
      <h2 class="section-title" data-accent="garves" style="margin-bottom:0;">ML &amp; Strategy</h2>
    </div>
    <div class="collapse-body">
      <!-- ML Intelligence -->
      <div class="grid-3" id="ml-models-grid" style="margin-bottom:12px;">
        <div class="glass-card" style="border-left:3px solid #ff6600;">
          <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:4px;">LSTM Neural Predictor</div>
          <div id="ml-lstm-status" style="font-size:0.76rem;">Loading...</div>
        </div>
        <div class="glass-card" style="border-left:3px solid #00BFFF;">
          <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:4px;">XGBoost Trade Predictor</div>
          <div id="ml-xgb-status" style="font-size:0.76rem;">Loading...</div>
        </div>
        <div class="glass-card" style="border-left:3px solid #00ff88;">
          <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:4px;">FinBERT Sentiment</div>
          <div id="ml-finbert-status" style="font-size:0.76rem;">Loading...</div>
        </div>
      </div>
      <!-- ML Win Predictor -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">ML Win Predictor</h3>
      <div class="grid-4" id="ml-summary-cards" style="margin-bottom:10px;">
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="ml-status">--</div><div class="stat-label">Model Status</div></div>
        <div class="stat-card" data-accent="success"><div class="stat-value" id="ml-accuracy">--</div><div class="stat-label">CV Accuracy</div></div>
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="ml-samples">--</div><div class="stat-label">Training Samples</div></div>
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="ml-f1">--</div><div class="stat-label">F1 Score</div></div>
      </div>
      <div class="glass-card" style="margin-bottom:12px;">
        <h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-2);">Top Feature Importances</h3>
        <div id="ml-feature-bars" style="font-family:var(--font-mono);font-size:0.72rem;"><span class="text-muted">Loading...</span></div>
      </div>
      <!-- Indicator Weights -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">Indicator Weights</h3>
      <div class="glass-card" style="margin-bottom:10px;padding:10px 14px;border-left:3px solid var(--agent-garves);">
        <div style="font-size:0.68rem;color:var(--text-muted);line-height:1.5;">
          <strong>Base</strong> = starting weight from Quant backtesting. <strong>Dynamic</strong> = auto-adjusted by the weight learner based on each indicator's live accuracy.
          Indicators with accuracy above 55% get boosted +30%. Below 45% accuracy = disabled (0 weight). <strong>Samples</strong> = total votes cast by this indicator across all trades.
        </div>
      </div>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Indicator</th><th>Base</th><th>Dynamic</th><th>Accuracy</th><th>Samples</th><th>Status</th></tr></thead><tbody id="conv-weights-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;">Loading...</td></tr></tbody></table></div>

      <!-- Trade Journal Analyzer -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;margin-top:16px;">Trade Journal</h3>
      <div class="grid-3" id="journal-summary-cards" style="margin-bottom:10px;">
        <div class="stat-card" data-accent="garves"><div class="stat-value" id="journal-streak">--</div><div class="stat-label">Current Streak</div></div>
        <div class="stat-card" data-accent="success"><div class="stat-value" id="journal-best-combo">--</div><div class="stat-label">Best Combo</div></div>
        <div class="stat-card" data-accent="warning"><div class="stat-value" id="journal-worst-combo">--</div><div class="stat-label">Worst Combo</div></div>
      </div>

      <!-- Hour Heatmap -->
      <div class="glass-card" style="margin-bottom:10px;">
        <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:6px;">Hour Heatmap (ET)</div>
        <div id="journal-hour-heatmap" style="display:grid;grid-template-columns:repeat(12,1fr);gap:3px;font-family:var(--font-mono);font-size:0.64rem;">
          <span class="text-muted" style="grid-column:1/-1;text-align:center;">Loading...</span>
        </div>
      </div>

      <!-- Best/Worst Combos Tables -->
      <div class="grid-2" style="margin-bottom:10px;">
        <div class="glass-card" style="border-left:3px solid var(--success);">
          <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--success);margin-bottom:4px;">Best Combos</div>
          <table class="data-table"><thead><tr><th>Combo</th><th>W-L</th><th>WR</th></tr></thead>
          <tbody id="journal-best-tbody"><tr><td colspan="3" class="text-muted" style="text-align:center;">Loading...</td></tr></tbody></table>
        </div>
        <div class="glass-card" style="border-left:3px solid var(--danger);">
          <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--danger);margin-bottom:4px;">Worst Combos</div>
          <table class="data-table"><thead><tr><th>Combo</th><th>W-L</th><th>WR</th></tr></thead>
          <tbody id="journal-worst-tbody"><tr><td colspan="3" class="text-muted" style="text-align:center;">Loading...</td></tr></tbody></table>
        </div>
      </div>

      <!-- Mistake Patterns -->
      <div class="glass-card" style="margin-bottom:10px;border-left:3px solid var(--warning);">
        <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--warning);margin-bottom:4px;">Mistake Patterns</div>
        <div id="journal-mistakes" style="font-family:var(--font-mono);font-size:0.72rem;"><span class="text-muted">Loading...</span></div>
      </div>

      <!-- Recommendations -->
      <div class="glass-card" style="border-left:3px solid var(--agent-garves);">
        <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:4px;">Recommendations</div>
        <div id="journal-recommendations" style="font-family:var(--font-mono);font-size:0.72rem;"><span class="text-muted">Loading...</span></div>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- COLLAPSIBLE: Trade Details (default open)   -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="collapse-section default-open">
    <div class="collapse-trigger">
      <h2 class="section-title" data-accent="garves" style="margin-bottom:0;">Trade Details</h2>
    </div>
    <div class="collapse-body">
      <!-- Activity Feed -->
      <div class="glass-card" style="margin-bottom:12px;border-left:3px solid var(--agent-garves);">
        <h3 class="section-title" style="font-size:0.72rem;margin-bottom:var(--space-2);text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);">Agent Activity</h3>
        <div id="garves-activity-feed" style="font-family:var(--font-mono);font-size:0.74rem;max-height:150px;overflow-y:auto;"><span class="text-muted">Waiting for activity...</span></div>
      </div>

      <!-- Trade History -->
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:var(--space-2);">
        <h3 class="section-title" style="font-size:0.76rem;margin:0;">Trade History</h3>
        <span id="oc-record" class="text-muted" style="font-size:0.72rem;">--</span>
        <span id="oc-realized-pnl" class="text-muted" style="font-size:0.72rem;margin-left:auto;">--</span>
      </div>
      <div class="glass-card" style="margin-bottom:12px;"><table class="data-table"><thead><tr><th>Asset</th><th>Market</th><th>Bet</th><th>Cost</th><th>Result</th><th>P&L</th></tr></thead>
      <tbody id="oc-history-tbody"><tr><td colspan="6" class="text-muted" style="text-align:center;padding:16px;">No trade history</td></tr></tbody></table></div>

      <!-- Pending Trades -->
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
        <h3 class="section-title" data-accent="warning" style="margin:0;font-size:0.76rem;">Pending Trades</h3>
        <span id="pending-count-badge" style="background:var(--warning);color:#000;font-weight:700;padding:2px 8px;border-radius:10px;font-size:0.72rem;">0</span>
        <span id="pending-exposure" class="text-muted" style="font-size:0.76rem;margin-left:auto;">Exposure: --</span>
      </div>
      <div class="glass-card" id="live-positions-table-wrap" style="margin-bottom:12px;">
        <table class="data-table"><thead><tr><th>Placed</th><th>Market</th><th>Direction</th><th>Stake</th><th>Edge</th><th style="min-width:100px;">Countdown</th><th>Pot. Profit</th><th>Pot. Loss</th></tr></thead>
        <tbody id="live-pending-tbody"><tr><td colspan="8" class="text-muted" style="text-align:center;padding:24px;">No pending trades</td></tr></tbody></table>
      </div>

      <!-- Resolved Trades -->
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
        <h3 class="section-title" data-accent="garves" style="margin:0;font-size:0.76rem;">Resolved Trades</h3>
        <span id="resolved-summary" class="text-muted" style="font-size:0.76rem;margin-left:auto;">--</span>
      </div>
      <div class="glass-card" style="margin-bottom:12px;"><table class="data-table"><thead><tr><th>Time</th><th>Market</th><th>Direction</th><th>Stake</th><th>Edge</th><th>Result</th><th>PnL</th></tr></thead><tbody id="live-resolved-tbody"><tr><td colspan="7" class="text-muted" style="text-align:center;padding:24px;">No resolved trades yet</td></tr></tbody></table></div>

      <!-- Breakdowns -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">Breakdowns</h3>
      <div class="grid-3" id="live-breakdowns" style="margin-bottom:12px;">
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Asset</h3><table class="data-table"><thead><tr><th>Asset</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-asset"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Timeframe</h3><table class="data-table"><thead><tr><th>TF</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-tf"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
        <div class="glass-card"><h3 class="section-title" style="font-size:0.76rem;margin-bottom:var(--space-3);">By Direction</h3><table class="data-table"><thead><tr><th>Dir</th><th>Trades</th><th>Win %</th></tr></thead><tbody id="live-bd-dir"><tr><td colspan="3" class="text-muted" style="text-align:center;">--</td></tr></tbody></table></div>
      </div>

      <!-- Daily Performance -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">Daily Performance History</h3>
      <div class="glass-card"><table class="data-table"><thead><tr><th>Date</th><th>Trades</th><th>W-L</th><th>Win Rate</th><th>PnL</th><th>Avg Edge</th><th>Regime</th><th>Issues</th></tr></thead><tbody id="daily-history-tbody"><tr><td colspan="8" class="text-muted" style="text-align:center;padding:24px;">No daily reports yet</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- COLLAPSIBLE: Market Data (default closed)   -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="collapse-section">
    <div class="collapse-trigger">
      <h2 class="section-title" data-accent="garves" style="margin-bottom:0;">Market Data</h2>
    </div>
    <div class="collapse-body">
      <!-- Derivatives Intelligence -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">Derivatives Intelligence</h3>
      <div class="grid grid-3" id="deriv-cards" style="margin-bottom:12px;">
        <div class="glass-card" id="deriv-funding"><div class="stat-label">Funding Rates</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="deriv-liquidations"><div class="stat-label">Liquidations (5m)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="deriv-depth"><div class="stat-label">Spot Depth (Top 5)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
      </div>
      <!-- External Data Intelligence -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">External Data Intelligence</h3>
      <div class="grid-3" id="ext-data-cards" style="margin-bottom:8px;">
        <div class="glass-card" id="ext-macro"><div class="stat-label">Macro (FRED)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="ext-defi"><div class="stat-label">DeFi (DeFiLlama)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="ext-mempool"><div class="stat-label">Mempool (BTC)</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
      </div>
      <div class="grid-4 mt-3" id="ext-asset-cards" style="margin-bottom:12px;">
        <div class="glass-card" id="ext-btc"><div class="stat-label">BTC External</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="ext-eth"><div class="stat-label">ETH External</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="ext-sol"><div class="stat-label">SOL External</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
        <div class="glass-card" id="ext-xrp"><div class="stat-label">XRP External</div><div class="text-muted" style="padding:8px;">Loading...</div></div>
      </div>
      <!-- News Sentiment -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">News Sentiment</h3>
      <div class="grid-3" id="garves-sentiment-grid"><div class="text-muted" style="padding:var(--space-4);grid-column:1/-1;text-align:center;">Loading sentiment data...</div></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- COLLAPSIBLE: Tools (default closed)         -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="collapse-section">
    <div class="collapse-trigger">
      <h2 class="section-title" data-accent="warning" style="margin-bottom:0;">Tools</h2>
    </div>
    <div class="collapse-body">
      <!-- Mistake Analysis -->
      <h3 class="section-title" data-accent="warning" style="font-size:0.76rem;">Today's Mistake Analysis</h3>
      <div id="daily-mistakes" class="flex flex-col gap-2" style="margin-bottom:12px;"><div class="text-muted" style="padding:var(--space-4);">Loading analysis...</div></div>
      <!-- Live Log -->
      <h3 class="section-title" data-accent="garves" style="font-size:0.76rem;">Live Log</h3>
      <div class="log-feed" id="live-log-feed"><div class="log-line"><span class="log-time">--:--:--</span><span class="log-msg">Waiting for log data...</span></div></div>
    </div>
  </div>
</div>
