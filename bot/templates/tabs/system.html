<!-- SYSTEM / INFRASTRUCTURE -->
<div class="tab-content" id="tab-system">
  <div class="grid-6">
    <div class="stat-card" data-accent="success"><div class="stat-value" id="sys-cpu">--</div><div class="stat-label">CPU Load</div></div>
    <div class="stat-card" data-accent="shelby"><div class="stat-value" id="sys-memory">--</div><div class="stat-label">Memory</div></div>
    <div class="stat-card" data-accent="atlas"><div class="stat-value" id="sys-disk">--</div><div class="stat-label">Disk</div></div>
    <div class="stat-card" data-accent="garves"><div class="stat-value" id="sys-uptime">--</div><div class="stat-label">Uptime</div></div>
    <div class="stat-card" data-accent="thor"><div class="stat-value" id="sys-processes">--</div><div class="stat-label">Python Procs</div></div>
    <div class="stat-card" data-accent="soren"><div class="stat-value" id="sys-ports">--</div><div class="stat-label">Open Ports</div></div>
  </div>

  <div style="display:flex;gap:8px;margin:12px 0;flex-wrap:wrap;" id="sys-action-buttons">
    <button class="btn" onclick="sysAction('restart-dashboard')" style="font-size:0.74rem;">Restart Dashboard</button>
    <button class="btn" onclick="sysAction('restart-shelby')" style="font-size:0.74rem;" title="Stops and restarts the Shelby LaunchAgent (scheduler + task manager)">Restart Shelby</button>
    <button class="btn" onclick="sysAction('restart-thor')" style="font-size:0.74rem;" title="Stops and restarts the Thor LaunchAgent (coding agent task runner)">Restart Thor</button>
    <button class="btn" onclick="sysAction('force-atlas-cycle')" style="font-size:0.74rem;" title="Triggers an immediate Atlas research cycle instead of waiting for the 45-min timer">Force Atlas Cycle</button>
    <button class="btn" onclick="sysAction('flush-events')" style="font-size:0.74rem;" title="Clears all events from the shared event bus (events.jsonl). Resets agent cursors.">Flush Event Bus</button>
    <button class="btn" onclick="loadSystemTab()" style="font-size:0.74rem;">Refresh All</button>
  </div>
  <div id="sys-action-result" style="font-size:0.72rem;font-family:var(--font-mono);color:var(--text-secondary);min-height:18px;margin-bottom:8px;"></div>

  <div class="section-spacer">
    <h2 class="section-title" data-accent="shelby">Agent Process Monitor</h2>
    <div class="glass-card">
      <table class="data-table">
        <thead>
          <tr><th>Agent</th><th>PID</th><th>CPU %</th><th>Mem MB</th><th>Uptime</th><th>Command</th></tr>
        </thead>
        <tbody id="sys-process-tbody">
          <tr><td colspan="6" class="text-muted" style="text-align:center;padding:16px;">Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="grid-2 mt-3">
    <div class="section-spacer">
      <h2 class="section-title" data-accent="garves">LaunchAgent Status</h2>
      <div class="glass-card">
        <div id="sys-launchagents" style="font-family:var(--font-mono);font-size:0.76rem;"><span class="text-muted">Loading...</span></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="atlas">Port Monitor</h2>
      <div class="glass-card">
        <div id="sys-port-list" style="font-family:var(--font-mono);font-size:0.76rem;"><span class="text-muted">Loading...</span></div>
      </div>
    </div>
  </div>

  <div class="grid-2 mt-3">
    <div class="section-spacer">
      <h2 class="section-title" data-accent="thor">Resource Usage</h2>
      <div class="glass-card">
        <div id="sys-resource-bars" style="font-family:var(--font-mono);font-size:0.76rem;"><span class="text-muted">Loading...</span></div>
      </div>
    </div>
    <div class="section-spacer">
      <h2 class="section-title" data-accent="error">Recent Errors</h2>
      <div class="glass-card" style="max-height:250px;overflow-y:auto;">
        <div id="sys-errors" style="font-family:var(--font-mono);font-size:0.74rem;"><span class="text-muted">No errors detected.</span></div>
      </div>
    </div>
  </div>

  <div class="section-spacer">
    <h2 class="section-title" data-accent="atlas">Live Event Feed</h2>
    <div class="glass-card" style="max-height:300px;overflow-y:auto;">
      <div id="sys-event-feed" style="font-family:var(--font-mono);font-size:0.74rem;"><span class="text-muted">Loading events...</span></div>
    </div>
  </div>
</div>
